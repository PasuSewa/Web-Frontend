<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Adding meta -->
    

    <!-- Adding external script-->
    

    <!-- Adding external style-->
    

    <!-- Adding scripts-->
    

    <!-- Adding style-->
    

    <!-- Adding overlay script-->
    

    <!-- Adding overlay style-->
    


    <title>
      components/CreateCredentialProp/index.tsx
    </title>

    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/third-party/ionicons.min.css">
    <link type="text/css" rel="stylesheet" href="styles/third-party/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/reset.css">
    <link type="text/css" rel="stylesheet" href="styles/heading.css">
    <link type="text/css" rel="stylesheet" href="styles/clean-jsdoc-theme-base.css">
    <link type="text/css" rel="stylesheet" href="styles/clean-jsdoc-theme-dark.css">
    
    <svg aria-hidden="true" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
    style="display:none">
    <defs>
        <symbol id="copy-icon" viewbox="0 0 488.3 488.3">
            <g>
                <path
                    d="M314.25,85.4h-227c-21.3,0-38.6,17.3-38.6,38.6v325.7c0,21.3,17.3,38.6,38.6,38.6h227c21.3,0,38.6-17.3,38.6-38.6V124    C352.75,102.7,335.45,85.4,314.25,85.4z M325.75,449.6c0,6.4-5.2,11.6-11.6,11.6h-227c-6.4,0-11.6-5.2-11.6-11.6V124    c0-6.4,5.2-11.6,11.6-11.6h227c6.4,0,11.6,5.2,11.6,11.6V449.6z" />
                <path
                    d="M401.05,0h-227c-21.3,0-38.6,17.3-38.6,38.6c0,7.5,6,13.5,13.5,13.5s13.5-6,13.5-13.5c0-6.4,5.2-11.6,11.6-11.6h227    c6.4,0,11.6,5.2,11.6,11.6v325.7c0,6.4-5.2,11.6-11.6,11.6c-7.5,0-13.5,6-13.5,13.5s6,13.5,13.5,13.5c21.3,0,38.6-17.3,38.6-38.6    V38.6C439.65,17.3,422.35,0,401.05,0z" />
            </g>
        </symbol>
        <symbol id='search-icon' viewBox="0 0 512 512">
            <g>
                <g>
                    <path
                        d="M225.474,0C101.151,0,0,101.151,0,225.474c0,124.33,101.151,225.474,225.474,225.474    c124.33,0,225.474-101.144,225.474-225.474C450.948,101.151,349.804,0,225.474,0z M225.474,409.323    c-101.373,0-183.848-82.475-183.848-183.848S124.101,41.626,225.474,41.626s183.848,82.475,183.848,183.848    S326.847,409.323,225.474,409.323z" />
                </g>
            </g>
            <g>
                <g>
                    <path
                        d="M505.902,476.472L386.574,357.144c-8.131-8.131-21.299-8.131-29.43,0c-8.131,8.124-8.131,21.306,0,29.43l119.328,119.328    c4.065,4.065,9.387,6.098,14.715,6.098c5.321,0,10.649-2.033,14.715-6.098C514.033,497.778,514.033,484.596,505.902,476.472z" />
                </g>
            </g>
        </symbol>
        <symbol id="down-icon" viewBox="0 0 16 16">
            <path 
                fill-rule="evenodd" 
                clip-rule="evenodd" 
                d="M12.7803 6.21967C13.0732 6.51256 13.0732 6.98744 12.7803 7.28033L8.53033 11.5303C8.23744 11.8232 7.76256 11.8232 7.46967 11.5303L3.21967 7.28033C2.92678 6.98744 2.92678 6.51256 3.21967 6.21967C3.51256 5.92678 3.98744 5.92678 4.28033 6.21967L8 9.93934L11.7197 6.21967C12.0126 5.92678 12.4874 5.92678 12.7803 6.21967Z"
            >
            </path>
        </symbol>
    </defs>
</svg>
  </head>

  <body>

    <nav class="navbar" id="navbar">
      <div class="navbar-heading" id="navbar-heading"><a href="index.html"><h2 class="navbar-heading-text">PasuNashi</h2></a></div><div class="search-box" id="search-box"><div class="search-box-input-container"><input class="search-box-input" type="text" placeholder="Search..." id="search-box-input" /><svg class="search-icon" alt="search-icon"><use xlink:href="#search-icon"></use></svg></div><div class="search-item-container" id="search-item-container"><ul class="search-item-ul" id="search-item-ul"></ul></div></div><div class="sidebar-main-content" id="sidebar-main-content"><ul><li class="menu-li"><a href='https://pasunashi.xyz' class=' menu-link' id='' target='_blank'>PasuNashi Web</a></li><li class="menu-li"><a href='https://github.com/PasuSewa' class=' menu-link' id='' target='_blank'>GitHub</a></li></ul><div class="accordion collapsed" id="2505662" > <h3 class="accordion-heading">Classes<svg><use xlink:href="#down-icon"></use></svg></h3><ul class="accordion-content"><li class="accordion-list" id=""><a href="IndexedDB.html">IndexedDB</a></li></ul> </div><div class="accordion collapsed" id="2839783" > <h3 class="accordion-heading">Modules<svg><use xlink:href="#down-icon"></use></svg></h3><ul class="accordion-content"><li class="accordion collapsed child" id=4433197><div class="accordion-heading child"><a href="module-IndexedDB.html">IndexedDB</a><svg><use xlink:href="#down-icon"></use></svg></div><ul class='methods accordion-content'><li data-type='method'><a href="module-IndexedDB.html#~dropDatabase">dropDatabase</a></li><li data-type='method'><a href="module-IndexedDB.html#~findCredential">findCredential</a></li><li data-type='method'><a href="module-IndexedDB.html#~forgetCredential">forgetCredential</a></li><li data-type='method'><a href="module-IndexedDB.html#~getCompanies">getCompanies</a></li><li data-type='method'><a href="module-IndexedDB.html#~getCredentials">getCredentials</a></li><li data-type='method'><a href="module-IndexedDB.html#~getRecentlySeen">getRecentlySeen</a></li><li data-type='method'><a href="module-IndexedDB.html#~getUser">getUser</a></li><li data-type='method'><a href="module-IndexedDB.html#~initiateDB">initiateDB</a></li><li data-type='method'><a href="module-IndexedDB.html#~putCompanies">putCompanies</a></li><li data-type='method'><a href="module-IndexedDB.html#~putCredential">putCredential</a></li><li data-type='method'><a href="module-IndexedDB.html#~putCredentials">putCredentials</a></li><li data-type='method'><a href="module-IndexedDB.html#~putRecentlySeen">putRecentlySeen</a></li><li data-type='method'><a href="module-IndexedDB.html#~putUser">putUser</a></li></ul></li><li class="accordion-list" id=""><a href="module-Translation.html">Translation</a></li></ul> </div><div class="accordion collapsed" id="8527544" > <h3 class="accordion-heading">Global<svg><use xlink:href="#down-icon"></use></svg></h3><ul class="accordion-content"><li class="accordion-list" id=""><a href="global.html#CopyText">CopyText</a></li><li class="accordion-list" id=""><a href="global.html#CreateCredentialProp">CreateCredentialProp</a></li><li class="accordion-list" id=""><a href="global.html#DeleteCredential">DeleteCredential</a></li><li class="accordion-list" id=""><a href="global.html#Dialog">Dialog</a></li><li class="accordion-list" id=""><a href="global.html#EditCodes">EditCodes</a></li><li class="accordion-list" id=""><a href="global.html#MapRoutes">MapRoutes</a></li><li class="accordion-list" id=""><a href="global.html#PurchaseButton">PurchaseButton</a></li><li class="accordion-list" id=""><a href="global.html#PurchaseDialog">PurchaseDialog</a></li><li class="accordion-list" id=""><a href="global.html#Routes">Routes</a></li><li class="accordion-list" id=""><a href="global.html#Section_Downloads">Section_Downloads</a></li><li class="accordion-list" id=""><a href="global.html#Section_ShowCredential">Section_ShowCredential</a></li><li class="accordion-list" id=""><a href="global.html#Section_UpdateRole">Section_UpdateRole</a></li><li class="accordion-list" id=""><a href="global.html#Snackbar">Snackbar</a></li><li class="accordion-list" id=""><a href="global.html#VisualizeCredentialProp">VisualizeCredentialProp</a></li></ul> </div></div>
      

    </nav>
    <div class="navbar-ham" id="navbar-ham">
      <div>
        <div class="first"></div>
        <div class="second"></div>
        <div class="third"></div>
      </div>
    </div>

    <div id="main" class="main-content">
      
      <h1 id='page-title' class="page-title">
        components/CreateCredentialProp/index.tsx
      </h1>
      

      



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import { FC, useState, useEffect, ChangeEvent } from "react"

import {
	Typography,
	Accordion,
	AccordionDetails,
	AccordionSummary,
	TextField,
	Grid,
} from "@material-ui/core"

import Autocomplete from "@material-ui/lab/Autocomplete"

import useStyles from "./styles"

import ExpandMoreIcon from "@material-ui/icons/ExpandMore"

import { useSelector } from "react-redux"
import { RootState } from "../../redux/store"

import { translate } from "../../lang"

import { AccessCredentialPropT, CompanyT } from "../../misc/types"

import EditCodes from "../EditCodes"

type LayoutOptions = "text field" | "select option" | "multiline" | "multiple codes" | "sqa"

type ExportEdits = {
	mainText: string
	secondText: string
	accessCredentialProp: AccessCredentialPropT
	editingOption: "question" | "answer" | ""
}

type Props = {
	layout: LayoutOptions
	label: string
	accessCredentialProp: AccessCredentialPropT
	editCredentialProp: (edits: ExportEdits) => void
	isMandatory?: boolean
	defaultExpanded?: boolean
	companies?: CompanyT[]
	maxChar?: number
	isCrypto?: boolean
}

/**
 * @alias CreateCredentialProp
 *
 * @description This component will be the card that shows the suer the inputs they must / should complete to register their credential, and will update the global state, where the credential is.
 *
 *@property {"text field" | "select option" | "multiline" | "multiple codes" | "sqa"} layoutOptions All the possible inputs for the credential props
 *
 * @property {string} label The input's label
 *
 * @property {AccessCredntialPropT} accessCredentialProp The name of the property the user will be editing
 * 
 * @property {function} editCredentialProp This function will dispatch an event to update the state of the credencial when the user changes anything
 *
 * @property {boolean} [isMandatory] If the user MUST complete this input
 *
 * @property {boolean} [defaultExpanded] If the card is open before the user does anything
 *
 * @property {CompanyT[]} [companies] An array of all the available companies for the user to select
 *
 * @property {number} maxChar The max amount of characters per input
 *
 * @property {boolean} isCrypto If the input is for crypto currency access words
 *
 * @example
 * 
 * &lt;CreateCredentialProp
		label="your security question &amp; answer"
		layout="sqa"
		maxChar={191}
		accessCredentialProp="security_question"
		editCredentialProp={dispatchEditCredential}
	/>

	@example
	&lt;CreateCredentialProp
		layout="select option"
		companies={["", ""]}
		label="select one or write your own"
		isMandatory
		defaultExpanded
		maxChar={50}
		accessCredentialProp="company_name"
		editCredentialProp={dispatchEditCredential}
	/>
 */

const CreateCredentialProp: FC&lt;Props> = (props) => {
	const { lng } = useSelector((state: RootState) => state.lng)

	const {
		layout,
		label,
		isMandatory,
		defaultExpanded,
		companies,
		maxChar,
		isCrypto,
		accessCredentialProp,
		editCredentialProp,
	} = props

	const [mainCharCount, setMainCharCount] = useState(0)

	const [secondCharCount, setSecondCharCount] = useState(0)

	const [mainText, setMainText] = useState("")

	const [secondText, setSecondText] = useState("")

	const [editingOption, setEditingOption] = useState&lt;"question" | "answer" | "">("")

	const classes = useStyles()

	const handleChange = (event: ChangeEvent&lt;{ value: unknown }>) => {
		const target = event.target as HTMLInputElement

		const inputType = target.getAttribute("type")

		const variant = target.getAttribute("variant")

		switch (inputType) {
			case "text field":
				setMainText(target.value)

				setMainCharCount(target.value.length)
				break

			case "select option":
				setMainText(target.value)

				setMainCharCount(target.value.length)
				break

			case "multiline":
				setMainText(target.value)

				setMainCharCount(target.value.length)
				break

			case "sqa":
				if (variant &amp;&amp; variant === "security question") {
					setMainText(target.value)

					setMainCharCount(target.value.length)

					setEditingOption("question")
				}

				if (variant &amp;&amp; variant === "security answer") {
					setSecondText(target.value)

					setSecondCharCount(target.value.length)

					setEditingOption("answer")
				}

				break

			default:
				break
		}
	}

	useEffect(() => {
		const edits: ExportEdits = {
			mainText,
			secondText,
			accessCredentialProp,
			editingOption,
		}

		editCredentialProp(edits)
	}, [mainText, secondText])

	const renderBody = (option: LayoutOptions) => {
		switch (option) {
			case "text field":
				return (
					&lt;>
						&lt;TextField
							label={label}
							variant="outlined"
							fullWidth
							className={classes.textColor}
							InputProps={{
								classes: {
									input: classes.textColor,
								},
							}}
							inputProps={{
								type: layout,
								"data-testid": "test_text_field",
							}}
							value={mainText}
							onChange={handleChange}
						/>
						{maxChar &amp;&amp; (
							&lt;Typography variant="body1" data-testid="test_max_char">
								{mainCharCount} / {maxChar}
							&lt;/Typography>
						)}
					&lt;/>
				)

			case "select option":
				let options: CompanyT[]

				if (companies) {
					options = companies.sort(
						(a, b) => -b.name.charAt(0).localeCompare(a.name.charAt(0))
					)
				} else {
					options = [
						{
							id: 0,
							name: "",
							url_logo: "",
						},
					]
				}

				return (
					&lt;>
						&lt;Autocomplete
							freeSolo
							data-testid="test_select_option"
							fullWidth
							options={options}
							groupBy={(option) => option.name.charAt(0)}
							getOptionLabel={(option) => option.name}
							renderInput={(params) => (
								&lt;TextField
									{...params}
									label={label}
									variant="outlined"
									value={mainText}
									onChange={handleChange}
									InputProps={{
										...params.InputProps,
										type: layout,
									}}
								/>
							)}
						/>
						{maxChar &amp;&amp; (
							&lt;Typography variant="body1">
								{mainCharCount} / {maxChar}
							&lt;/Typography>
						)}
					&lt;/>
				)

			case "multiline":
				return (
					&lt;>
						&lt;TextField
							label={label}
							variant="outlined"
							fullWidth
							multiline
							className={classes.textColor}
							InputProps={{
								classes: {
									input: classes.textColor,
								},
							}}
							inputProps={{
								type: layout,
								"data-testid": "test_multiline",
							}}
							value={mainText}
							onChange={handleChange}
						/>
						{maxChar &amp;&amp; (
							&lt;Typography variant="body1">
								{mainCharCount} / {maxChar}
							&lt;/Typography>
						)}
					&lt;/>
				)

			case "multiple codes":
				return &lt;EditCodes codes={[""]} option={2} isCrypto={isCrypto ? isCrypto : false} />

			case "sqa":
				return (
					&lt;>
						&lt;Grid item xs={12}>
							&lt;TextField
								label={translate("encryption_examples", lng, 5)}
								variant="outlined"
								fullWidth
								className={classes.textColor}
								InputProps={{
									classes: {
										input: classes.textColor,
									},
								}}
								inputProps={{
									type: layout,
									variant: "security question",
									"data-testid": "test_sqa_question",
								}}
								value={mainText}
								onChange={handleChange}
							/>
							{maxChar &amp;&amp; (
								&lt;Typography variant="body1">
									{mainCharCount} / {maxChar}
								&lt;/Typography>
							)}
						&lt;/Grid>
						&lt;Grid item xs={12}>
							&lt;TextField
								label={translate("encryption_examples", lng, 6)}
								variant="outlined"
								fullWidth
								className={classes.textColor}
								InputProps={{
									classes: {
										input: classes.textColor,
									},
								}}
								inputProps={{
									type: layout,
									variant: "security answer",
									"data-testid": "test_sqa_answer",
								}}
								value={secondText}
								onChange={handleChange}
							/>
							{maxChar &amp;&amp; (
								&lt;Typography variant="body1">
									{secondCharCount} / {maxChar}
								&lt;/Typography>
							)}
						&lt;/Grid>
					&lt;/>
				)

			default:
				return null
		}
	}

	//don't know why, but the class "borderRadius" doesn't apply the border radius, but the style does...
	return (
		&lt;>
			&lt;Accordion
				defaultExpanded={defaultExpanded}
				data-testid="test_accordion"
				style={{ borderRadius: 8 }}
			>
				&lt;AccordionSummary expandIcon={&lt;ExpandMoreIcon />}>
					&lt;Typography className={classes.heading}>{label}&lt;/Typography>
					&lt;Typography className={classes.secondaryHeading} data-testid="test_mandatory">
						{translate("auth_form_texts", lng, isMandatory ? 16 : 15)}
					&lt;/Typography>
				&lt;/AccordionSummary>
				&lt;AccordionDetails>
					&lt;Grid container spacing={4}>
						{layout === "sqa" ? (
							renderBody(layout)
						) : (
							&lt;Grid item xs={12}>
								{renderBody(layout)}
							&lt;/Grid>
						)}
					&lt;/Grid>
				&lt;/AccordionDetails>
			&lt;/Accordion>
		&lt;/>
	)
}

export default CreateCredentialProp
</code></pre>
        </article>
    </section>




    </div>

    <footer class="footer" id="footer">
      
    </footer>

    <script src="scripts/third-party/prettify.js"></script>
    <script src="scripts/third-party/lang-css.js"></script>
    <script type="text/javascript" src="scripts/misc.js"></script>

    <script>prettyPrint();</script>
    <script src="scripts/linenumber.js"></script>
    <script src="scripts/fix-code-block.js"></script>
    <script src="scripts/fix-navbar.js"></script>
    
      <script src="scripts/search.js"></script>
      <script src="scripts/third-party/fuse.js"></script>
      <script>
        var list = [{"title":"IndexedDB","link":"<a href=\"IndexedDB.html\">IndexedDB</a>"},{"title":"IndexedDB","link":"<a href=\"module-IndexedDB.html\">IndexedDB</a>"},{"title":"module:IndexedDB~dropDatabase","link":"<a href=\"module-IndexedDB.html#~dropDatabase\">module:IndexedDB~dropDatabase &rtrif; undefined</a>"},{"title":"module:IndexedDB~findCredential","link":"<a href=\"module-IndexedDB.html#~findCredential\">module:IndexedDB~findCredential &rtrif; undefined</a>"},{"title":"module:IndexedDB~forgetCredential","link":"<a href=\"module-IndexedDB.html#~forgetCredential\">module:IndexedDB~forgetCredential &rtrif; undefined</a>"},{"title":"module:IndexedDB~getCompanies","link":"<a href=\"module-IndexedDB.html#~getCompanies\">module:IndexedDB~getCompanies &rtrif; undefined</a>"},{"title":"module:IndexedDB~getCredentials","link":"<a href=\"module-IndexedDB.html#~getCredentials\">module:IndexedDB~getCredentials &rtrif; undefined</a>"},{"title":"module:IndexedDB~getRecentlySeen","link":"<a href=\"module-IndexedDB.html#~getRecentlySeen\">module:IndexedDB~getRecentlySeen &rtrif; undefined</a>"},{"title":"module:IndexedDB~getUser","link":"<a href=\"module-IndexedDB.html#~getUser\">module:IndexedDB~getUser &rtrif; undefined</a>"},{"title":"module:IndexedDB~initiateDB","link":"<a href=\"module-IndexedDB.html#~initiateDB\">module:IndexedDB~initiateDB &rtrif; undefined</a>"},{"title":"module:IndexedDB~putCompanies","link":"<a href=\"module-IndexedDB.html#~putCompanies\">module:IndexedDB~putCompanies &rtrif; undefined</a>"},{"title":"module:IndexedDB~putCredential","link":"<a href=\"module-IndexedDB.html#~putCredential\">module:IndexedDB~putCredential &rtrif; undefined</a>"},{"title":"module:IndexedDB~putCredentials","link":"<a href=\"module-IndexedDB.html#~putCredentials\">module:IndexedDB~putCredentials &rtrif; undefined</a>"},{"title":"module:IndexedDB~putRecentlySeen","link":"<a href=\"module-IndexedDB.html#~putRecentlySeen\">module:IndexedDB~putRecentlySeen &rtrif; undefined</a>"},{"title":"module:IndexedDB~putUser","link":"<a href=\"module-IndexedDB.html#~putUser\">module:IndexedDB~putUser &rtrif; undefined</a>"},{"title":"Translation","link":"<a href=\"module-Translation.html\">Translation</a>"},{"title":"CopyText","link":"<a href=\"global.html#CopyText\">CopyText</a>"},{"title":"CreateCredentialProp","link":"<a href=\"global.html#CreateCredentialProp\">CreateCredentialProp</a>"},{"title":"DeleteCredential","link":"<a href=\"global.html#DeleteCredential\">DeleteCredential</a>"},{"title":"Dialog","link":"<a href=\"global.html#Dialog\">Dialog</a>"},{"title":"EditCodes","link":"<a href=\"global.html#EditCodes\">EditCodes</a>"},{"title":"MapRoutes","link":"<a href=\"global.html#MapRoutes\">MapRoutes</a>"},{"title":"PurchaseButton","link":"<a href=\"global.html#PurchaseButton\">PurchaseButton</a>"},{"title":"PurchaseDialog","link":"<a href=\"global.html#PurchaseDialog\">PurchaseDialog</a>"},{"title":"Routes","link":"<a href=\"global.html#Routes\">Routes</a>"},{"title":"Section_Downloads","link":"<a href=\"global.html#Section_Downloads\">Section_Downloads</a>"},{"title":"Section_ShowCredential","link":"<a href=\"global.html#Section_ShowCredential\">Section_ShowCredential</a>"},{"title":"Section_UpdateRole","link":"<a href=\"global.html#Section_UpdateRole\">Section_UpdateRole</a>"},{"title":"Snackbar","link":"<a href=\"global.html#Snackbar\">Snackbar</a>"},{"title":"VisualizeCredentialProp","link":"<a href=\"global.html#VisualizeCredentialProp\">VisualizeCredentialProp</a>"}];
        var options = 
          setupSearch(list, options)
      </script>
    

    

    

    

    


  </body>

</html>